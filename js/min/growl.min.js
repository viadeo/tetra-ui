/*! Tetra UI v1.3.2 | (MIT Licence) (c) Viadeo/APVO Corp - inspired by Bootstrap (c) Twitter, Inc. (Apache 2 Licence) */

tetra.controller.register("growl",{scope:"growl",constr:function(a,b){return{events:{controller:{"growl: display":function(c){a.ready?(a.count||b.notify("add growl container"),b.notify("display growl",{message:c.message,options:a.methods.extend(a.options,c.options)}),a.count++):a.growlStack.push({message:c.message,options:a.methods.extend(a.options,c.options)})},"growl: close":function(){b.notify("hide growl")}},view:{"display stacked messages":function(){a.ready=!0,a.count||b.notify("add growl container");for(var c=0,d=a.growlStack.length;d>c;c++)b.notify("display growl",{message:a.growlStack[c].message,options:a.growlStack[c].options}),a.count++}}},methods:{init:function(){a.count=0,a.ready=!1,a.options={type:"info",width:350,position:"center",delay:2500,dismiss:!1,template:"growl"},a.growlStack=[]},extend:function(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}}}}}),tetra.view.register("growl",{scope:"growl",use:["growl"],constr:function(a,b,c){"use strict";return{events:{user:{click:{".growl-close":function(b,d){a.methods.removeGrowl(c(d).parent(".growl:first"))}}},controller:{"add growl container":function(){a.growl=c(document.createElement("div")).attr("id","growl-container").appendTo("body")},"display growl":function(d){b.exec(d.options.template,d,function(b){var e=c(document.createElement("div")).html(b).contents().appendTo(a.growl);d.options.width&&a.win.width()>=350&&e.width(d.options.width),d.options.delay&&setTimeout(function(){a.methods.removeGrowl(e)},d.options.delay),e.addClass("growl-active")})},"hide growl":function(){a.growl&&a.growl.find(".growl").each(function(b,d){a.methods.removeGrowl(c(d))})}},window:{load:function(){b.notify("display stacked messages")}}},methods:{init:function(){a.win=c(window),a.growl=null,a.idle=500},removeGrowl:function(b){c(b).removeClass("growl-active"),setTimeout(function(){c(b).remove()},a.idle)}}}}});