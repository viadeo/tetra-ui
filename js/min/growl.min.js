/*! Tetra UI v1.3.0 | (MIT Licence) (c) Viadeo/APVO Corp - inspired by Bootstrap (c) Twitter, Inc. (Apache 2 Licence) */

tetra.controller.register("growl",{scope:"growl",constr:function(a,b){return{events:{controller:{"growl: display":function(c){a.count||b.notify("add growl container");var d={type:"info",width:350,position:"center",delay:2500,dismiss:!1,template:"growl"};b.notify("display growl",{id:"test",message:c.message,options:a.methods.extend(d,c.options)}),a.count++},"growl: close":function(){b.notify("hide growl")}}},methods:{init:function(){a.count=0},extend:function(a,b){a=a||{};for(var c in b)a[c]=b[c];return a}}}}}),tetra.view.register("growl",{scope:"growl",use:["growl"],constr:function(a,b,c){"use strict";return{events:{user:{click:{".growl-close":function(b,d){a.methods.removeGrowl(c(d).parent(".growl:first"))}}},controller:{"add growl container":function(){a.growl=c(document.createElement("div")).attr("id","growl-container").appendTo("body")},"display growl":function(d){b.exec(d.options.template,d,function(b){var e=c(document.createElement("div")).html(b).contents().appendTo(a.growl);d.options.width&&a.win.width()>=350&&e.width(d.options.width),d.options.delay&&setTimeout(function(){a.methods.removeGrowl(e)},d.options.delay),e.addClass("growl-active")})},"hide growl":function(){a.growl&&a.growl.find(".growl").each(function(b,d){a.methods.removeGrowl(c(d))})}}},methods:{init:function(){a.win=c(window),a.growl=null,a.idle=500},removeGrowl:function(b){c(b).removeClass("growl-active"),setTimeout(function(){c(b).remove()},a.idle)}}}}});